<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Join</title>
  <meta name="description" content="Join, dein Kanban Management Tool" />
  <meta name="keywords" content="Join, join, Kanban, kanban, project, projects, mangement, tool" />
  <link rel="stylesheet" type="text/css" href="../styles/board.css" />
  <link rel="stylesheet" type="text/css" href="../styles/media/board.css" />
  <link rel="stylesheet" type="text/css" href="../styles/standard.css" />
  <link rel="stylesheet" type="text/css" href="../style.css" />
  <link rel="stylesheet" type="text/css" href="../styles/overlays/board_overlays.css" />
  <link rel="icon" type="image/png" sizes="192x192" href="../assets/icons/fav/android-chrome-192x192.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="../assets/icons/fav/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="../assets/icons/fav/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="../assets/icons/fav/favicon-16x16.png" />
  <link rel="manifest" href="../assets/icons/fav/site.webmanifest" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css"/>
</head>
<body>
<header class="header">
    <h2 class="title">Kanban Project Management Tool</h2>
    <div class="header-icons">
      <a href="../pages/help.html">
        <img class="help-icon" src="../assets/icons/frame/header/help.svg" alt="Help">
      </a>
      <div id="board-user-avatar" class="user-avatar"></div>
    </div>
</header>
<nav id="burger" class="burger">
    <a href="./legal_notice.html">Legal Notice</a>
    <a href="./privacy_policy.html">Privacy Policy</a>
    <a href="#" onclick="logOutUser()">Log out</a>
</nav>
<nav class="nav">
  <div class="nav-top">
    <img class="nav-logo" src="../assets/img/logo/logo_nav.svg" alt="">
    <a href="../pages/summary.html">
      <img src="../assets/icons/frame/nav/summary.svg" alt="">
      <p>Summary</p>
    </a>
    <a href="../pages/add_task.html">
      <img src="../assets/icons/frame/nav/add_task.svg" alt="">
      <p>Add Task</p>
    </a>
    <a class="current-site" href="../pages/board.html">
      <img src="../assets/icons/frame/nav/board_active.svg" alt="">
      <p>Board</p>
    </a>
    <a href="../pages/contacts.html">
      <img src="../assets/icons/frame/nav/contacts.svg" alt="">
      <p>Contacts</p>
    </a>
  </div>
  <div class="nav-bottom">
    <a href="../pages/privacy_policy.html">Privacy Policy</a>
    <a href="../pages/legal_notice.html">Legal notice</a>
  </div>
</nav>
<nav class="mobile-header">
  <a href="#"><img class="mobile-logo" src="../assets/img/logo/logo_mobile.svg" alt=""></a>
  <div id="mobile-user-avatar" class="user-avatar"></div>
</nav>
<nav id="mobileNav" class="mobile-nav">
    <a href="./help.html">Help</a>
    <a href="./legal_notice.html">Legal Notice</a>
    <a href="./privacy_policy.html">Privacy Policy</a>
    <a href="#" onclick="logOutUser()">Log out</a>
</nav>

<div id="taskToast" class="task-toast hidden">
  <img src="../assets/icons/add_task/board_white.png" alt="Board icon">
</div>

<section class="main-content">
  <section class="board-nav">
    <div class="board-nav-top">
      <h1 class="board-header">Board</h1>
      <a href="./add_task.html">
        <button class="addtask-btn-mobile" title="Add Task (Mobile)">
         <img class="plus" src="../assets/icons/board/add.svg" alt="">
        </button>
      </a>
      <div class="find-add-div">
        <input id="taskSearch" class="findtask" type="text" placeholder="Find Task">
        <button onclick="openAddTaskDialog('todo')" class="addtask-btn" title="Add Task">
          <span>Add task</span>
          <img class="plus" src="../assets/icons/board/add.svg" alt="">
        </button>
      </div>
    </div>
    <div>
      <input id="taskSearchMobile" class="findtaskMobile" type="text" placeholder="Find Task">
    </div>
  </section>

  <dialog id="taskDetailDialog" class="task-detail-dialog">
      <div class="task-detail-content">
          <div id="taskDetailBody"></div>
          <div class="task-detail-actions"></div>
      </div>
  </dialog>
  <section class="board-nav-bottom">
    <div class="task-container">
      <div class="span-container">
        <span class="category-span">To do</span>
        <button class="categoryplus" title="Task hinzufügen" onclick="openAddTaskDialog('todo')">+</button>
      </div>
      <div id="toDo" class="category-container"></div>
    </div>
    <div class="task-container">
      <div class="span-container">
        <span class="category-span">In Progress</span>
        <button class="categoryplus" title="Task hinzufügen" onclick="openAddTaskDialog('inprogress')">+</button>
      </div>
      <div id="inProgress" class="category-container"></div>
    </div>
    <div class="task-container">
      <div class="span-container">
        <span class="category-span">Await feedback</span>
        <button class="categoryplus" title="Task hinzufügen" onclick="openAddTaskDialog('awaitingfeedback')">+</button>
      </div>
      <div id="awaitFeedback" class="category-container"></div>
    </div>
    <div class="task-container">
      <div class="span-container">
        <span class="category-span">Done</span>
        <button class="categoryplus" title="Task hinzufügen" onclick="openAddTaskDialog('done')">+</button>
      </div>
      <div id="done" class="category-container"></div>
    </div>
  </section>
</section>
<footer class="mobile-footer">
    <div class="footer-btn">
        <a class="footer-icon" href="../pages/summary.html"><img src="../assets/icons/frame/nav/summary.svg"
                alt=""></a>
        <span class="footer-span">Summary</span>
    </div>
    <div class="footer-btn">
        <a class="footer-icon" href="../pages/add_task.html"><img src="../assets/icons/frame/nav/add_task.svg"
                alt=""></a>
        <span class="footer-span">Add Task</span>
    </div>
    <div class="footer-btn footer-active">
        <a class="footer-icon" href="../pages/board.html"><img src="../assets/icons/frame/nav/board_active.svg"
                alt=""></a>
        <span class="footer-span">Board</span>
    </div>
    <div class="footer-btn">
        <a class="footer-icon" href="../pages/contacts.html"><img src="../assets/icons/frame/nav/contacts.svg"
                alt=""></a>
        <span class="footer-span">Contacts</span>
    </div>
</footer>
<dialog id="deleteConfirmDialog" class="delete-confirm-dialog">
  <div class="delete-dialog-content">
      <p>Bist du sicher, dass du diesen Task löschen möchtest?</p>
      <div class="delete-dialog-actions">
          <button id="cancelDeleteBtn" class="cancel-btn">Abbrechen</button>
          <button id="confirmDeleteBtn" class="delete-btn">Löschen</button>
      </div>
  </div>
</dialog>

<dialog id="addTaskOverlay" class="add_task_dialog_overlay">
<div class="main_content">
  <div class="headline">
    <h1>Add Task</h1>
    <button type="button" class="close-add-task-overlay">&times;</button>
  </div>

  <form class="task-form">
    <div class="box-wrapper">
      <!-- LEFT BOX -->
      <div class="left-box">
        <label for="title">Title<span class="required">*</span></label>
        <input id="title" type="text" placeholder="Enter a title" autocomplete="off">

        <label for="description">Description</label>
        <textarea id="description" placeholder="Enter a description"></textarea>

        <label for="task-due-date">Due date<span class="required">*</span></label>
        <div class="input-icon">
          <input type="date" id="task-due-date" required>
        </div>
      </div>

      <div class="divider"></div>

      <!-- RIGHT BOX -->
      <div class="right-box">
        <label>Priority</label>
        <div class="priority-buttons">
          <button type="button" class="btn" data-priority="urgent"> Urgent
            <img src="../assets/icons/add_task/urgent_small.png" alt="Urgent">
          </button>
          <button type="button" class="btn" data-priority="medium">Medium
            <img src="../assets/icons/add_task/medium_orange.png" alt="Medium"> 
          </button>
          <button type="button" class="btn" data-priority="low">Low
            <img src="../assets/icons/add_task/low.png" alt="Low"> 
          </button>
        </div>

        <label for="assigned">Assigned to</label>
        <select id="assigned" class="option" multiple></select>
        <div id="assignedDropdown" class="choices__list choices__list--dropdown"></div>
        <div class="assigned-badges" id="assignedBadges"></div>

        <label for="category">Category<span class="required">*</span></label>
        <select id="category" class="option">
          <option value="">Select task category</option>
        </select>

        <label>Subtasks</label>
        <div class="input-icon-subtask">
          <input class="subtask-input" type="text" placeholder="Add new subtask" autocomplete="off">
          <button type="button" class="add-subtask">
            <img src="../assets/icons/add_task/subtask_icon.png" alt="Add">
          </button>
        </div>
        <ul id="subtask-list"></ul>
      </div>
    </div>

    <div class="add_task_button">
        <div class="req-img-container">
          <img class="req-img" src="../assets/icons/add_task/required_field.png" alt="">
        </div>
        <div class="create-btn-container">
          <button class="clear_button" id="clearTaskButton" type="button">Clear x</button>
          <button type="button" class="create_task_btn">
            Create Task <img src="../assets/icons/add_task/check.png" alt="">
          </button>
        </div>
      </div>
  </form>
</div>
  </dialog>

<dialog id="editTaskDialog" class="add_task_dialog_overlay">
  <div class="main_content">
    <!-- Kopfzeile -->
    <div class="headline">
      <h1>Edit Task</h1>
      <button type="button" class="close-add-task-overlay" id="cancelEditBtn">&times;</button>
    </div>

    <!-- Inhalt (vertikal) -->
    <div class="box-wrapper" style="flex-direction: column; gap: 24px; padding: 0 40px;">
      <!-- Title -->
      <div class="form-section">
        <label for="editTitle">Title<span class="required">*</span></label>
        <input id="editTitle" type="text" placeholder="Enter a title" required>
      </div>

      <!-- Description -->
      <div class="form-section">
        <label for="editDescription">Description</label>
        <textarea id="editDescription" placeholder="Enter a description"></textarea>
      </div>

      <!-- Due date -->
      <div class="form-section">
        <label for="editDueDate">Due date<span class="required">*</span></label>
        <div class="input-icon-date">
          <input id="editDueDate" type="date" required>
          <span class="icon"><img src="../assets/icons/add_task/event.png" alt="Calendar"></span>
        </div>
      </div>

      <!-- Priority -->
      <div class="form-section">
        <label>Priority</label>
        <div class="priority-buttons">
          <button type="button" class="btn" data-priority="urgent">
            Urgent
            <img class="icon default" src="../assets/icons/add_task/urgent_small.png" alt="">
            <img class="icon white" src="../assets/icons/add_task/urgent_white.png" alt="">
          </button>
          <button type="button" class="btn" data-priority="medium">
            Medium
            <img class="icon default" src="../assets/icons/add_task/medium_orange.png" alt="">
            <img class="icon white" src="../assets/icons/add_task/medium_white.png" alt="">
          </button>
          <button type="button" class="btn" data-priority="low">
            Low
            <img class="icon default" src="../assets/icons/add_task/low.png" alt="">
            <img class="icon white" src="../assets/icons/add_task/low_white.png" alt="">
          </button>
        </div>
      </div>

<!-- Assigned to -->
<div class="form-section">
  <label>Assigned to</label>
  <div class="assigned-to-wrapper">
    <!-- Trigger-Box -->
    <div id="assignedSelectBox" class="assigned-select-box">
      <span>Select contacts to assign</span>
      <button type="button" class="assigned-toggle-btn">▾</button>
    </div>
    <!-- Dropdown-Liste -->
    <div id="assignedDropdown" class="assigned-dropdown hidden"></div>
    <!-- Ausgewählte Badges -->
    <div id="assignedBadges" class="assigned-badges"></div>
  </div>
</div>


      <!-- Category (readonly) -->
      <div class="form-section">
        <label for="editCategory">Category<span class="required">*</span></label>
        <select id="editCategory" disabled>
          <option value="">(unchangeable)</option>
        </select>
      </div>

      <!-- Subtasks -->
    <div class="form-section">
      <div style="font-weight:600; margin-bottom: 4px;">Subtasks</div>
      <div class="input-icon-subtask">
        <input id="editSubtaskInput" type="text" placeholder="Add subtask" autocomplete="off">
        <button type="button" class="add-subtask" id="addEditSubtaskBtn">
          <span class="icon"><img src="../assets/icons/add_task/subtask_icon.png" alt=""></span>
        </button>
        <button type="button" class="clear-subtask-input" id="clearEditSubtaskInput" tabindex="-1" aria-label="Clear subtask input" style="display:none;">&#10005;</button>
      </div>
      <ul id="editSubtasksList"></ul>
    </div>

    <!-- Buttons unten -->
    <div class="add_task_button" style="padding: 28px 40px; justify-content: flex-end;">
      <button type="button" class="clear_button" id="cancelEditBtnBottom">Cancel x</button>
      <button type="submit" form="editTaskForm" class="create_task_btn">Save ✓</button>
    </div>
  </div>
</dialog>


  
<div id="subtask-tooltip" class="subtask-tooltip"></div>
<div id="custom-warning-modal" class="modal-hidden" style="position:fixed;z-index:9999;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:12px;box-shadow:0 6px 32px #0002;padding:32px 24px;font-size:18px;min-width:260px;max-width:95vw;text-align:center;display:none;">
    <div id="custom-warning-content"></div>
</div>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script src="../script.js"></script>
<script src="../scripts/realtimeDatabase.js"></script>
<script src="../scripts/boardFirebase.js"></script>
<script src="../scripts/board.js"></script>
<script src="../scripts/currentUser.js"></script>
<script src="../scripts/contactsOwnProfile.js"></script>
<script src="../scripts/logInGuest.js"></script>
<script src="../scripts/logOutUser.js"></script>
<script src="../scripts/authGuard.js"></script> 
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
</body>
</html>
